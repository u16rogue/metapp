#pragma once

#include "common.hh"

// -----------------------------------------------------------------------------------------
// --- Defer statement

#define mpp_lock(mutx) \
  const mpp::details::__mpp_imm mpp_glue(__mpp_lock_, __LINE__) = [&, lk = std::lock_guard<std::mutex>(mutx)]()

// -----------------------------------------------------------------------------------------

// -----------------------------------------------------------------------------------------
// --- Extended Logging

#if __has_include(<format>)
  #include <format>
  #define mpp_log(fmt, ...)
#endif

// -----------------------------------------------------------------------------------------
